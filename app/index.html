<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <!-- Allows proper rendering and touch zooming for mobile devices -->
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <!-- CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">
    <link rel="stylesheet" href="css/app.css" type="text/css">
    <title>QANDA</title>

  </head>
  <!-- ng-strict-di to force me to use the array notation for injection -->
  <body ng-app="qandaApp" ng-strict-di>

    <!-- Header -->
    <header>
      <div class="header-title">QANDA</div>
      <!-- hidden-sm-down makes this element invisible for devices sized small and under, Bootstrap is very good at showing/hiding stuff for differently sized screens, unlike Angular. Angular is more suitable for event-based action -->
      <div class="hidden-sm-down header-title-trail">Ask and answer your own questions</div>
    </header>

    <!-- Body -->
    <main class="container-fluid" ng-controller="qandaController">
      <!-- Question prompt -->
      <!-- Should I use ngSubmit(requiring form) or ngClick(just button) here? -->
      <!-- Btw ngSubmit prevents the form from having its intended behavior of sending a request to the server when ngSubmit is used(unless you set an action attribute) -->
      <!-- And also, if you need to have more than one button within a form, for example a button to reset the form, you need to set the reset button to have type="button" because by default it will have type="submit" to submit the form. -->
      <form class="form-group new-qa-form" ng-submit="newQanda()">
        <input type="text" class="form-control question-input" placeholder="Enter a new question..." ng-model="qanda.newQuestion"></input>
        <textarea class="form-control answer-input" rows="3" placeholder="Enter a new answer..." ng-model="qanda.newAnswer"></textarea>
        <button type="submit" class="btn btn-primary new-qa-button center-block">Enter a new Q&ampA</button>
      </form>

      <!-- List title / Search bar / Filter bar -->
      <div class="qa-list-header">
        <!-- Again, I have the option to use a form, but it's just sensible to use ngClick -->
        <div class="qa-list-title">List of Q&ampA's</div>
        <!-- The dot in qanda.query isn't necessary here but putting them in is a good habit to get into to avoid breaking scope inheritance -->
        <input type="search" ng-model="qanda.query" class="form-control qa-list-search" placeholder="Search by..."/><!-- This is here to get rid of the display: inline-block space
     --><select ng-model="qanda.ordering" class="form-control qa-list-ordering">
          <option value="question">A-Z</option>
          <option value="-question">Z-A</option>
        </select>
      </div>
      <!-- List of questions -->
      // TODO FOR tomorrow, and also look at angular components n stuff
      <ul class="qa-list">
        <li ng-if="qas.length == 0" class="qa-list-empty" ng-bind-template="No Q&ampA's..."></li>
        <li ng-repeat="qa in qas | filter : qanda.query | orderBy : qanda.ordering" class="qa-list-item" ng-if="qas.length != 0" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()">
          <div class="qa-list-item-qanda">
            <div class="qa-list-item-question wordwrap"> // Fix wordwrap
              <!-- Kept separate to make protractor tests a bit more sensible -->
              <span ng-bind-template="Question: "></span>
              <span ng-bind-template="{{qa.question}}" class="wordwrap"></span>
            </div>
            <div class="qa-list-item-answer wordwrap">
              <span ng-bind-template="Answer: "></span>
              <span ng-bind-template="{{qa.answer}}" class="wordwrap"></span>
            </div>
          </div>
          <div class="qa-list-item-edit" ng-if="hoverEdit">
            <button type="submit" class="btn btn-primary ng-cloak" value="Submit">Edit</button>
            <button type="submit" class="btn btn-secondary ng-cloak" value="Submit">Delete</button>
          </div>
        </li>
      </ul>
    </main>

    <!-- Bootstrap & Angular -->
    <script src="../bower_components/angular/angular.js"></script>
    <script src="js/app.module.js"></script> <!-- This needs to be loaded first to register the module -->
    <script src="js/controllers.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://www.atlasestateagents.co.uk/javascript/tether.min.js"></script> <!-- Need this; bootstrap complains if it doesn't have tether -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js" integrity="sha384-vZ2WRJMwsjRMW/8U7i6PWi6AlO1L79snBrmgiDpgIWJ82z8eA5lenwvxbMV1PAh7" crossorigin="anonymous"></script>
    <!-- Auto refresh atom plugin, remove later -->
    <script src="http://localhost:35729/livereload.js"></script>
  </body>
</html>
